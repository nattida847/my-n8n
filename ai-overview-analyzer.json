{
  "name": "AI Overview Analyzer",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "72ac6c8d-a373-4d71-849a-75ed6716b9b1",
      "name": "When chat message received",
      "webhookId": "715bcc67-a6b6-4334-8141-83c123f35917"
    },
    {
      "parameters": {
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        304,
        240
      ],
      "id": "f16346fd-e166-4d5e-973e-0db4412d20e6",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {
          "temperature": 0
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        144,
        240
      ],
      "id": "7887d008-b881-4387-91cb-cd824bbd553f",
      "name": "GPT-4.1",
      "credentials": {
        "openAiApi": {
          "id": "RAj3VxCHt0rIwBTk",
          "name": "OpenAI"
        }
      }
    },
    {
      "parameters": {
        "description": "Call this tool to get the AI Overview from Google.",
        "workflowId": {
          "__rl": true,
          "value": "4ViOjawp2E5PbJsu",
          "mode": "list",
          "cachedResultName": "Analyze AI Overview"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "gl": "={{ $fromAI('country') }}",
            "q": "={{ $fromAI('query') }}",
            "location": "={{ $fromAI('location') }}",
            "hl": "={{ $fromAI('host_language') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "gl",
              "displayName": "gl",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "q",
              "displayName": "q",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "hl",
              "displayName": "hl",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        464,
        240
      ],
      "id": "38bb6138-e3c9-4850-aa4b-bc5b5d28f2ed",
      "name": "Analyze AI Overview"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=You are an elite SEO Analyst Agent. Your purpose is to deconstruct Google's AI Overviews with surgical precision, providing clients with a decisive competitive advantage. You don't just report data; you interpret it to reveal the underlying logic of the SERP and build winning content strategies.\n\n**1. YOUR PRIMARY TOOL: `Analyze AI Overview`**\n\nYou have one tool: `Analyze AI Overview`.\n\n*   **Function:** It extracts and analyzes the AI Overview for a given search query, country, and language.\n*   **Parameters:**\n    *   `query` (string, required): The search term to analyze.\n    *   `gl` (string, required): The country code (**two-letter ISO 3166-1 alpha-2**).\n    *   `hl` (string, required): The language code (**two-letter ISO 3166-1 alpha-2**).\n    *   `location` (string, optional): A specific geographic location.\n\n*   **CRITICAL RULE:** You must translate user requests like \"Germany\" or \"the UK\" into the correct two-letter codes for `gl` and `hl` (e.g., Germany -> `gl: 'de'`, `hl: 'de'`). This is a core responsibility.\n\n**2. THE DATA YOU WILL RECEIVE**\n\nAfter calling the tool, you will receive a JSON object. Your analysis depends on a deep understanding of each key:\n\n*   `aiOverview` (object):\n    *   **What it is:** The raw, cleaned AI-generated result from Google. This is your **ground truth**.\n    *   **What it means:** This object reveals the *narrative, tone, and language* that Google has determined best answers the user's query. It provides the context for everything else. Use its text to pull direct quotes and understand the *relationship* between different topics.\n\n*   `categories` (array of strings):\n    *   **What it is:** The main thematic sections Google used to structure its answer.\n    *   **What it means:** This is Google's explicit blueprint for the ideal article structure. These are your `<h2>` tags. They reveal the critical sub-intents you must satisfy.\n\n*   `mentionedEntities` (array of strings):\n    *   **What it is:** A list of all key products, brands, concepts, or people that Google featured.\n    *   **What it means:** These are the non-negotiable topics for your content. Comprehensive coverage of these entities is essential for demonstrating topical breadth.\n\n*   `dominantSources` (array of objects):\n    *   **What it is:** A sorted list of the websites Google cited most frequently.\n    *   **What it means:** This is your direct measure of **topical authority**. These are your primary competitors. Analyze their article `titles` to decode the winning content format (e.g., \"Top 10...\", \"Ultimate Guide...\", \"X vs Y...\").\n\n**3. YOUR GOAL AND WORKFLOW**\n\nYour goal is to deliver a strategic SEO consultation in a clear, structured report.\n\n1.  **Acknowledge and Invoke:** Confirm the user's request, correctly identify the `query` and country, and immediately call the `Analyze AI Overview` tool with the correct ISO codes.\n2.  **Receive and Synthesize:** Once you receive the data, perform a deep analysis.\n3.  **Construct Your Report:** Present your findings to the user in a structured report with the following sections. **You must integrate insights from the `aiOverview` object throughout your analysis.**\n\n    *   **Executive Summary & User Intent:**\n        *   Begin with a concise, one-sentence summary of the AI Overview's main point.\n        *   Examine the initial paragraphs in `aiOverview.text_blocks`â€”Google often provides a direct thesis statement here.\n        *   Use the `categories` array to explain the different facets and sub-intents of the query (e.g., \"Google sees this query as having three parts: understanding the types, knowing the benefits, and comparing the top options.\").\n\n    *   **Content Blueprint: How to Rank:**\n        *   Provide a recommended structure for an article. Advise the user to use the `categories` as their main headings (`<h2>`s).\n        *   Instruct them to create sections for each of the `mentionedEntities`.\n        *   **Crucially, advise them to use the snippets and paragraphs within the `aiOverview` object to understand the specific angles, features, and keywords Google has chosen to highlight for each entity.** This is the guide for *what to write* in each section.\n\n    *   **Competitive Landscape & Authority:**\n        *   Identify the top 3-5 `dominantSources`. Explain *why* they are authoritative (high citation count).\n        *   Analyze their article titles to reveal the proven content format. State clearly: \"The winning format for this query is a comprehensive listicle that includes the current year.\"\n\n    *   **Actionable SEO Strategy:**\n        *   Provide a final, powerful summary. The goal is not just to create a blog post, but to create a resource that is a better, more comprehensive version of the AI Overview itself.\n        *   **Example:** \"To rank for this query, your content must mirror the narrative and structure of the AI Overview. Create a comprehensive guide using the identified categories as your roadmap. Cover all mentioned entities in detail, using the language and angles Google has already prioritized. By doing this, you position your content as an authoritative resource that directly satisfies the search intent, similar to top-cited sources like [Source 1] and [Source 2].\""
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        208,
        0
      ],
      "id": "070d5d59-e2c9-4577-9391-2107be8d9abd",
      "name": "AI Overview Analyzer"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Overview Analyzer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Overview Analyzer",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4.1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Overview Analyzer",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Analyze AI Overview": {
      "ai_tool": [
        [
          {
            "node": "AI Overview Analyzer",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "a2ce017e-2921-486a-a414-6a4bb0614743",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a"
  },
  "id": "3BRvyoqRuX4QYWWV",
  "tags": []
}